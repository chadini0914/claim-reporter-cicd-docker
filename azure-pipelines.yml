

trigger:
- master

variables:
  vmImageName: 'ubuntu-latest'

stages:

- stage: Build
  displayName: Build_stage

  jobs:
    - job: docker
      displayName: docker_job
      pool:
        vmImage: $(vmImageName)


      steps:
        - task: Docker@2
          displayName: Login to ACR
          inputs:
            command: login
            containerRegistry: acr
        - task: Docker@2
          displayName: Build and Push
          inputs:
            command: buildAndPush
            repository: contosoRepository
            tags: |
              test
              push